<!DOCTYPE html>
<html lang="en">

<head>
    <title>Unity ECS 框架摸索第一章：ECS 简介 | Celestial</title>
    
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <meta name="robots" content="noodp"/>

    <link rel="stylesheet" href="https://paakmau.github.io/style.css">
    <link rel="stylesheet" href="https://paakmau.github.io/color/orange-auto.css">

        <link rel="stylesheet" href="https://paakmau.github.io/color/background_auto.css">
    
    <link rel="stylesheet" href="https://paakmau.github.io/font-hack-subset.css">

    <meta name="description" content="">

    <meta property="og:description" content="">
    <meta property="og:title" content="Unity ECS 框架摸索第一章：ECS 简介 | Celestial">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://paakmau.github.io/202001311348/">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="">
    <meta name="twitter:title" content="Unity ECS 框架摸索第一章：ECS 简介 | Celestial">
    <meta property="twitter:domain" content="paakmau.github.io">
    <meta property="twitter:url" content="https://paakmau.github.io/202001311348/">

                <link rel="alternate" type="application/rss+xml" title="Celestial RSS Feed" href="https://paakmau.github.io/rss.xml" />
                <link rel="alternate" type="application/atom+xml" title="Celestial Atom Feed" href="https://paakmau.github.io/atom.xml" />
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'neutral'
        });
    </script>
</head>

<body class="">
<div class="container">
    
    <header class="header">
        <div class="header__inner">
            <div class="header__logo">
                    
                <a href="https://paakmau.github.io" style="text-decoration: none;">
                    <div class="logo">
                      
                            Celestial
                        
                    </div>
                </a>
            </div>
        </div>

        
        
                <nav class="menu">
            <ul class="menu__inner">
                <li class="active"><a href="https://paakmau.github.io">home</a></li>
            
                <li><a href="https://paakmau.github.io/tags">tags</a></li>
            
                <li><a href="https://github.com/paakmau" target="_blank" rel="noopener noreferrer">github</a></li>
            </ul>
        </nav>
    
    
        
    </header>
    

    <div class="content">
        
    <div class="post">
        
    <h1 class="post-title"><a href="https://paakmau.github.io/202001311348/">Unity ECS 框架摸索第一章：ECS 简介</a></h1>
    <div class="post-meta-inline">
        
    <span class="post-date">
            2020-01-31
        </span>

    </div>

    
        <span class="post-tags-inline">
                :: tags:&nbsp;
                <a class="post-tag" href="https://paakmau.github.io/tags/unity-ecs/">#Unity ECS</a></span>
    

        <div class="post-content">
            <p>之前接触 ECS 是因为看了守望先锋的架构分析。了解了一下发现这种架构天生支持多线程，而且对缓存非常友好，似乎做联网同步也很方便，感觉这应该是个挺有前途的设计思路。<br></p>
<span id="continue-reading"></span>
<p>这几天翻了一下 Unity 官网，看到 ECS 有文档了，例子也更新了许多，突然兴奋，准备写个 Demo 试试。顺便想记录看看 Unity 的正式版 api 能改成个什么鬼样子（大雾）</p>
<p>本系列使用 <code>Entities 0.5.1-preview.11</code>，并非正式版。<br>
因此更倾向于科普而不是实用（学了也没用早晚要改 API），另外需要对旧版 Unity 有少许了解。</p>
<h2 id="ecs-jia-gou">ECS 架构</h2>
<p>ECS，是 Entity-Component-System 的缩写，该架构也就只有这三个东西组成（严格意义上）。这个架构由数据驱动逻辑，有别于我们熟知的 OOP（面向对象）</p>
<h2 id="ming-ci-jie-shi">名词解释</h2>
<p>Entity，实体，可以近似理解为 OOP 中的对象。
Entity 仅由 Component 组成，此外不含有其他任何成分。
可以认为 Entity 只是一个 id，组成它所有组件可以用这个 id 索引。
具体实现中 Entity 通常也只是一个用于标记的 id。</p>
<p>Component，组件，存储实际的数据，不包含逻辑。
例如 Position 组件中会有 x, y, z 表示一个实体的位置。</p>
<p>System，系统，不含数据，只处理逻辑，固定帧率调用。
且它会筛选拥有指定若干 Component 的 Entity 并对指定的 Component 进行读写。</p>
<h2 id="ecs-jie-shao">ECS 介绍</h2>
<p>理解 ECS 的重点有两个：</p>
<ul>
<li>一个是数据存储，即 Entity 由多个不同种的 Component 组成。</li>
<li>另一个就是逻辑执行，即 System 只会筛选出拥有特定 Component 的 Entity，并只对那些特定的 Component 进行读写。System 针对的是 Component 而不是 Entity。</li>
</ul>
<p>System 执行逻辑，Component 存储数据，Entity 则是将 Component 关联起来。</p>
<h2 id="you-lie-fen-xi">优劣分析</h2>
<p>天生对并行友好。不难发现，可能会存在一些系统，它们每次只会处理同一个 Entity 的某几个固定组件。<br>
比方说有几百个 Entity 和一枚多核处理器，可以每个核心分别处理一个 Entity 而完全不需要加锁。
而不同的系统如果访问的 Component 不同。</p>
<p>天生对缓存友好。因为 System 只关心特定的 Component，因此如果将同种 Component 存储在线性内存空间里，System 遍历 Component 的时候缓存命中率很高。
Unity 的具体实现中是将同类 Entity 的 Component 连续存储，可以实现缓存高命中。</p>
<p>耦合性低。理想状态下，系统只会对 Component 作出反应，因此系统之间是相对独立的。
但是各系统的执行顺序会存在依赖关系，不好处理，耦合比较严重。
系统之间信息传递也比较困难，理想情况下是通过数据共享来处理，属于可接受的公共耦合。
但实际情况很复杂，会产生不得不互相调接口的情况，比如 Unity 一些内部实现。
因此需要一些合理的设计才能真正实现低耦合。</p>
<p>目前成熟的 ECS 框架不算多，可以抄的作业也不多。</p>
<h2 id="qi-ta-xue-xi-zi-liao">其他学习资料</h2>
<p>感觉我写的有一点过于简单，想要深入了解可以看看下面这些文章。</p>
<p><a href="https://www.cnblogs.com/zhaoqingqing/p/9718973.html">https://www.cnblogs.com/zhaoqingqing/p/9718973.html</a><br>
<a href="https://blog.codingnow.com/2017/06/overwatch_ecs.html">https://blog.codingnow.com/2017/06/overwatch_ecs.html</a></p>

        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h">Thanks for reading! Read other posts?</span>
                    <hr />
                </div>
                <div class="pagination__buttons">
                        <span class="button previous">
                            <a href="https://paakmau.github.io/202001202338/">
                                <span class="button__icon">←</span>&nbsp;
                                <span class="button__text">Vuex 学习笔记</span>
                            </a>
                        </span>
                    
                    
                        <span class="button next">
                            <a href="https://paakmau.github.io/202001311515/">
                                <span class="button__text">Unity ECS 框架摸索第二章：Hello World</span>&nbsp;
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    </div>
            </div>
        
    </div>

    </div>

    
    <footer class="footer">
        <div class="footer__inner">
                <div class="copyright">
                        <span>© 
    2025
 Powered by <a href="https://www.getzola.org/">Zola</a></span>
                    <span class="copyright-theme">
                        <span class="copyright-theme-sep">:: </span>
                        Theme: <a href="https://github.com/pawroman/zola-theme-terminimal/">Terminimal</a> by pawroman
                    </span>
                </div>
            </div>
    </footer>
    

</div>
</body>

</html>
